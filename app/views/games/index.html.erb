<div class="col-xs-4 col-xs-offset-1">
	<div>
		<h4>Games you are playing <span class="instruct">(click on game to resume)</span></h4>
		<% current_games = 0 %>
		<ol>
			<% @game.where("player_white_id = ? OR player_black_id = ?", "#{current_user.id}", "#{current_user.id}").find_each do |game| %>
				<% current_games = 1 %>
				<li>
					<span class="game_link"><%= link_to "#{game.name_for_game}", game_path(game) %></span>
						<% if game.player_white_id == current_user.id %>
							<em>You're playing as white</em>
						<% elsif game.player_black_id == current_user.id && game.player_white_id != nil %>
							<em>You're playing as black</em>
						<% else %>
							<b>(waiting for an opponent)</b>
						<% end %>
					</span>
				</li>
			<% end %>
		</ol>
		<% if current_games == 0 %>
			<p>
				You don't have any games in progress, yet.
			</p>
		<% end %>
	</div>
	<br />

	<div>
		<h4>Start a new game?</h4>
		<%= simple_form_for Game.new, :url => games_path do |f| %>
			<%= f.input :player_black_id ,:as => :hidden, :input_html => { :value => current_user.id } %>
			<%= f.input :player_white_id ,:as => :hidden, :value => nil %>
			<div class="input-group">
				<%= f.input :name_for_game, :as => :hidden, :input_html => {:value => "#{current_user.email[/[^@]+/]}"} %>
				<span class="match_name"><%= "Match vs player: #{current_user.email[/[^@]+/]}" %></span>
				<span class="input-group-btn"><%= f.submit "Create game", :class => 'btn btn-warning' %></span>
			</div>
		<% end %>
	</div>
</div>

<div class="col-xs-5 col-xs-offset-1">
	<h4>Pick an opponent & join a game</h4>
	<% opponents_games = 0 %>
		<% @game.where(player_white_id: nil).where.not(player_black_id: current_user.id).find_each do |game| %>
			<% opponents_games = 1 %>
			<%= simple_form_for game do |f| %>
				<div class="input-group">
					<%= f.input :player_white_id ,:as => :hidden, :input_html => { :value => current_user.id } %>
					<%= f.input :name_for_game,:as => :hidden, :input_html => { :value => "#{game.name_for_game} vs #{current_user.email[/[^@]+/]}" } %>
					<span class="match_name"><%= "Game #{game.id} - Match vs #{game.name_for_game}"  %></span>
					<span class="input-group-btn"><%= f.submit "Join this game", :class => 'btn btn-warning' %></span>
				</div>
			<% end %>
		<% end %>
		<% if opponents_games == 0 %>
			<p>
				No available games to join.
			</p>
		<% end %>
</div>
